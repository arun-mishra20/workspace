@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

@layer components {
  /* ═══════════════════════════════════════════════════════════════
     Glassmorphic semantic variables
     Apple Liquid Glass style defaults for light and dark modes
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] {
    /* Base Glass Values - Adjusted via JS */
    --glass-opacity: 0.7;
    --glass-blur: 16px;
    --glass-border-opacity: 0.2;
    --glass-highlight: rgba(255, 255, 255, 0.4);
    --glass-border: rgba(255, 255, 255, var(--glass-border-opacity));
    --glass-bg: color-mix(in oklch, var(--background) calc(var(--glass-opacity) * 100%), transparent);
    
    /* Semantic Colors tailored for Glass */
    --glass-text-destructive: oklch(0.58 0.16 25);
    --glass-text-info: oklch(0.5 0.12 250);
    --glass-text-success: oklch(0.5 0.12 155);
    --glass-text-warning: oklch(0.56 0.13 75);
    
    /* Default spacing & fonts */
    scroll-behavior: smooth;
    
    /* Depth and Shadows */
    --glass-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.07);
    --glass-glow: inset 0 0 0 1px var(--glass-border), inset 1px 1px 1px 0px var(--glass-highlight);
    --glass-glow-hover: inset 0 0 0 1px var(--glass-border), inset 2px 2px 2px 0px var(--glass-highlight);
  }

  .dark[data-theme-preset="glassmorphism"] {
    --glass-highlight: rgba(255, 255, 255, 0.05);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4);
    
    --glass-text-destructive: oklch(0.74 0.14 25);
    --glass-text-info: oklch(0.72 0.11 250);
    --glass-text-success: oklch(0.72 0.11 155);
    --glass-text-warning: oklch(0.76 0.11 75);
  }

  :root[data-theme-preset="glassmorphism"] body {
    font-family: var(
      --font-sans,
      "Inter",
      ui-sans-serif,
      system-ui,
      sans-serif
    );
    letter-spacing: var(--tracking-normal, 0em);
    
    /* Typically glassmorphism needs an interesting background to shine.
       We don't strictly enforce a background image here as the user might want a solid color, 
       but we ensure the body color applies. */
  }

  /* ═══════════════════════════════════════════════════════════════
     Base Glass Mixin Effect applied across major components
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] .glass-panel {
    background: var(--glass-bg) !important;
    backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    box-shadow: var(--glass-shadow), var(--glass-glow) !important;
    border: 0 !important;
  }

  /* ═══════════════════════════════════════════════════════════════
     Buttons
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="button"] {
    border: 0 !important;
    border-radius: var(--radius) !important;
    background: var(--glass-bg) !important;
    color: var(--foreground);
    backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    box-shadow: 0 4px 12px 0 rgba(0,0,0,0.05), var(--glass-glow) !important;
    transition:
      transform 200ms cubic-bezier(0.2, 0.8, 0.2, 1),
      box-shadow 200ms ease,
      background-color 200ms ease;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-size="icon"] {
    height: 3rem;
    width: 3rem;
  }

  /* ── Button variants ── */
  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-variant="secondary"],
  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-variant="outline"],
  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-variant="ghost"],
  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-variant="default"] {
    background: var(--glass-bg) !important;
    color: var(--foreground) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-variant="destructive"] {
    background: color-mix(in oklch, var(--glass-bg) 70%, var(--destructive)) !important;
    color: var(--destructive-foreground) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="button"][data-variant="link"] {
    background: transparent !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    box-shadow: none !important;
    border: 0 !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="button"]:not([data-variant="link"]):hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 6px 16px 0 rgba(0,0,0,0.08), var(--glass-glow-hover) !important;
    background: color-mix(in oklch, var(--glass-bg) 80%, var(--foreground) 10%) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="button"]:not([data-variant="link"]):active {
    transform: translateY(1px) scale(0.98);
    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.05), inset 0 0 0 1px var(--glass-border) !important;
  }

  /* ═══════════════════════════════════════════════════════════════
     Cards
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="card"] {
    border: 0 !important;
    border-radius: calc(var(--radius) * 1.5) !important;
    background: var(--glass-bg) !important;
    backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    box-shadow: var(--glass-shadow), var(--glass-glow) !important;
    color: var(--foreground);
    transition: transform 300ms cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 300ms ease;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="card"]:hover {
    transform: translateY(-2px);
    box-shadow: 0 12px 40px 0 rgba(0,0,0,0.1), var(--glass-glow-hover) !important;
  }

  /* ═══════════════════════════════════════════════════════════════
     Inputs / Textareas / Selects
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="input"],
  :root[data-theme-preset="glassmorphism"] [data-slot="textarea"],
  :root[data-theme-preset="glassmorphism"] [data-slot="select-trigger"] {
    border: 0 !important;
    border-radius: var(--radius) !important;
    background: color-mix(in oklch, var(--glass-bg) 50%, rgba(0,0,0,0.05)) !important;
    backdrop-filter: blur(calc(var(--glass-blur) * 0.5)) saturate(120%) !important;
    -webkit-backdrop-filter: blur(calc(var(--glass-blur) * 0.5)) saturate(120%) !important;
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.05), inset 0 0 0 1px var(--glass-border) !important;
    transition: transform 200ms ease, box-shadow 200ms ease, background-color 200ms ease;
  }

  .dark[data-theme-preset="glassmorphism"] [data-slot="input"],
  .dark[data-theme-preset="glassmorphism"] [data-slot="textarea"],
  .dark[data-theme-preset="glassmorphism"] [data-slot="select-trigger"] {
    background: color-mix(in oklch, var(--glass-bg) 50%, rgba(0,0,0,0.2)) !important;
    box-shadow: inset 0 2px 6px 0 rgba(0,0,0,0.2), inset 0 0 0 1px var(--glass-border) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="input"]:focus-visible,
  :root[data-theme-preset="glassmorphism"] [data-slot="textarea"]:focus-visible,
  :root[data-theme-preset="glassmorphism"] [data-slot="select-trigger"]:focus-visible {
    outline: none !important;
    box-shadow: 
      0 0 0 2px var(--background),
      0 0 0 4px var(--ring),
      inset 0 2px 4px 0 rgba(0,0,0,0.05), 
      inset 0 0 0 1px var(--glass-border) !important;
    background: var(--background) !important;
  }

  /* ═══════════════════════════════════════════════════════════════
     Tabs
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="tabs-list"] {
    border-radius: var(--radius) !important;
    background: color-mix(in oklch, var(--glass-bg) 60%, rgba(0,0,0,0.05)) !important;
    backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    box-shadow: inset 0 1px 3px 0 rgba(0,0,0,0.05), inset 0 0 0 1px var(--glass-border) !important;
    padding: 0.35rem;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="tabs-trigger"] {
    border-radius: calc(var(--radius) - 0.25rem);
    transition: all 200ms ease;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="tabs-trigger"][data-state="active"] {
    background: var(--background) !important;
    box-shadow: 0 2px 8px 0 rgba(0,0,0,0.1), var(--glass-glow) !important;
  }

  /* ═══════════════════════════════════════════════════════════════
     Dropdowns / Popovers / Tooltips / Dialogs
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="dropdown-menu-content"],
  :root[data-theme-preset="glassmorphism"] [data-slot="popover-content"],
  :root[data-theme-preset="glassmorphism"] [data-slot="select-content"],
  :root[data-theme-preset="glassmorphism"] [data-slot="dialog-content"],
  :root[data-theme-preset="glassmorphism"] [data-slot="sheet-content"],
  :root[data-theme-preset="glassmorphism"] [data-slot="drawer-content"] {
    border: 0 !important;
    border-radius: calc(var(--radius) * 1.5) !important;
    background: var(--glass-bg) !important;
    backdrop-filter: blur(calc(var(--glass-blur) * 1.5)) saturate(180%) !important;
    -webkit-backdrop-filter: blur(calc(var(--glass-blur) * 1.5)) saturate(180%) !important;
    box-shadow: 0 16px 48px 0 rgba(0,0,0,0.15), var(--glass-glow) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="tooltip-content"] {
    border: 0 !important;
    border-radius: var(--radius) !important;
    background: color-mix(in oklch, var(--foreground) 80%, transparent) !important;
    color: var(--background) !important;
    backdrop-filter: blur(var(--glass-blur)) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) !important;
    box-shadow: 0 4px 12px 0 rgba(0,0,0,0.1), inset 0 0 0 1px rgba(255,255,255,0.1) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="dropdown-menu-item"],
  :root[data-theme-preset="glassmorphism"] [data-slot="select-item"] {
    border-radius: calc(var(--radius) - 0.25rem);
    transition: background-color 150ms ease;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="dropdown-menu-item"]:focus,
  :root[data-theme-preset="glassmorphism"] [data-slot="dropdown-menu-item"][data-highlighted],
  :root[data-theme-preset="glassmorphism"] [data-slot="select-item"][data-highlighted] {
    background: color-mix(in oklch, var(--foreground) 10%, transparent) !important;
    color: var(--foreground);
  }

  /* ═══════════════════════════════════════════════════════════════
     Switch / Checkbox / Slider
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="switch"] {
    border: 0 !important;
    background: color-mix(in oklch, var(--glass-bg) 50%, rgba(0,0,0,0.1)) !important;
    backdrop-filter: blur(var(--glass-blur)) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) !important;
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.1), inset 0 0 0 1px var(--glass-border) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="switch"][data-state="checked"] {
    background: var(--primary) !important;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.2) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="switch-thumb"] {
    background: var(--background) !important;
    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2), var(--glass-glow) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="checkbox"] {
    border: 0 !important;
    background: color-mix(in oklch, var(--glass-bg) 50%, rgba(0,0,0,0.1)) !important;
    backdrop-filter: blur(var(--glass-blur)) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) !important;
    box-shadow: inset 0 2px 4px 0 rgba(0,0,0,0.1), inset 0 0 0 1px var(--glass-border) !important;
  }

  :root[data-theme-preset="glassmorphism"] [data-slot="checkbox"][data-state="checked"] {
    background: var(--primary) !important;
    color: var(--primary-foreground) !important;
    box-shadow: 0 2px 4px 0 rgba(0,0,0,0.1), var(--glass-glow) !important;
  }

  /* ═══════════════════════════════════════════════════════════════
     Badges
     ═══════════════════════════════════════════════════════════════ */
  :root[data-theme-preset="glassmorphism"] [data-slot="badge"] {
    border: 0 !important;
    border-radius: calc(var(--radius) * 2) !important;
    background: color-mix(in oklch, var(--glass-bg) 80%, rgba(255,255,255,0.1)) !important;
    backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(150%) !important;
    box-shadow: 0 2px 8px 0 rgba(0,0,0,0.05), var(--glass-glow) !important;
  }
}
